---
title: å¦‚ä½•åˆ¶å®šå‰ç«¯è§„èŒƒï¼Ÿ
date: 2020-07-07
categories: å‰ç«¯
tags: [è§„èŒƒ,eslint,husky]
---

## ä»€ä¹ˆæ˜¯è§„èŒƒ?

è§„èŒƒï¼Œåè¯æ„ä¹‰ä¸Šï¼šå³æ˜æ–‡è§„å®šæˆ–çº¦å®šä¿—æˆçš„æ ‡å‡†ï¼Œå¦‚ï¼šé“å¾·è§„èŒƒã€æŠ€æœ¯è§„èŒƒç­‰ã€‚ åŠ¨è¯æ„ä¹‰ä¸Šï¼šæ˜¯æŒ‡æŒ‰ç…§æ—¢å®šæ ‡å‡†ã€è§„èŒƒçš„è¦æ±‚è¿›è¡Œæ“ä½œï¼Œä½¿æŸä¸€è¡Œä¸ºæˆ–æ´»åŠ¨è¾¾åˆ°æˆ–è¶…è¶Šè§„å®šçš„æ ‡å‡†ï¼Œå¦‚ï¼šè§„èŒƒç®¡ç†ã€è§„èŒƒæ“ä½œã€‚

## ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒ?

- é™ä½æ–°æˆå‘˜èå…¥å›¢é˜Ÿçš„æˆæœ¬, åŒæ—¶ä¹Ÿä¸€å®šç¨‹åº¦é¿å…æŒ–å‘ã€‚
- æé«˜å¼€å‘æ•ˆç‡ã€å›¢é˜Ÿåä½œæ•ˆç‡, é™ä½æ²Ÿé€šæˆæœ¬ã€‚
- å®ç°é«˜åº¦ç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼Œæ–¹ä¾¿review, å¦å¤–ä¸€æ–¹é¢å¯ä»¥æé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€‚
- è§„èŒƒæ˜¯å®ç°è‡ªåŠ¨åŒ–çš„åŸºç¡€ã€‚
- è§„èŒƒæ˜¯ä¸€ä¸ªå›¢é˜ŸçŸ¥è¯†æ²‰æ·€çš„ç›´æ¥è¾“å‡ºã€‚

## ç‰ˆæœ¬è§„èŒƒ

é¡¹ç›®çš„ç‰ˆæœ¬å·åº”è¯¥æ ¹æ®æŸäº›è§„åˆ™è¿›è¡Œè¿­ä»£, è¿™é‡Œæ¨èä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ, é€šè¿‡è¿™ä¸ªè§„èŒƒï¼Œç”¨æˆ·å¯ä»¥äº†è§£ç‰ˆæœ¬å˜æ›´çš„å½±å“èŒƒå›´ã€‚ è§„åˆ™å¦‚ä¸‹:

- ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ã€‚
- æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ã€‚
- ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚

### Git åˆ†æ”¯æ¨¡å‹

**masteråˆ†æ”¯**
masteråˆ†æ”¯è¡¨ç¤ºä¸€ä¸ªç¨³å®šçš„å‘å¸ƒç‰ˆæœ¬ã€‚

- åœºæ™¯: å‰ç«¯åº”ç”¨ä¼šè·Ÿéšç‰ˆæœ¬è¿­ä»£, åœ¨devåˆ†æ”¯æµ‹è¯•ç¨³å®šå, ä¼šåˆå¹¶åˆ°masteråˆ†æ”¯, å¹¶ä½¿ç”¨tagæ ‡è®°åº”ç”¨ç‰ˆæœ¬å’Œå¯¹åº”çš„ç‰ˆæœ¬ã€‚
- tagè§„èŒƒ: v{APP_version}, ä¾‹å¦‚v0.1.0ã€‚
- äººå‘˜ï¼šç”±é¡¹ç›®è´Ÿè´£äººè¿›è¡Œå®¡æ ¸åˆå¹¶, æ™®é€šå¼€å‘è€…æ²¡æœ‰æƒé™ã€‚

**devåˆ†æ”¯**
å¼€å‘è€…ä¸»è¦å·¥ä½œçš„åˆ†æ”¯, æœ€æ–°çš„ç‰¹æ€§æˆ–bugä¿®å¤éƒ½ä¼šæäº¤åˆ°è¿™ä¸ªåˆ†æ”¯. å¼€å‘è€…å¦‚æœåœ¨è¯¥åˆ†æ”¯è¿›è¡Œäº†æäº¤ï¼Œåœ¨pushåˆ°è¿œç¨‹ä¹‹å‰åº”è¯¥å…ˆpullä¸€ä¸‹ï¼Œ å¹¶å°½é‡ä½¿ç”¨ `rebase` æ¨¡å¼ï¼Œä¿è¯åˆ†æ”¯çš„ç®€æ´ã€‚

- å‘½åè§„èŒƒ: devã€‚
- tagè§„èŒƒ: åœ¨devåˆ†æ”¯ä¸­ä¹Ÿå¯èƒ½ä¼šç»å†å‘å¸ƒè¿‡ç¨‹, ä¾‹å¦‚bugä¿®å¤ç‰ˆæœ¬. è¿™é‡ŒåŒæ ·ä½¿ç”¨tagæ¥æ ‡è®°è¿™äº›å‘å¸ƒ. ä¾‹å¦‚v0.1.1ã€‚
- æäº¤è§„èŒƒï¼šå¦‚æœå®åœ¨å¼€å‘åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œåœ¨æ¨é€åˆ°è¿œç¨‹ä¹‹å‰ï¼Œåº”è¯¥ä½¿ç”¨ [git rebase](https://www.jianshu.com/p/6960811ac89c) å½¢å¼æ›´æ–°æœ¬åœ°åˆ†æ”¯ã€‚

**featureåˆ†æ”¯**
æ¶‰åŠå¤šäººåä½œæˆ–è€…å¤§åŠŸèƒ½çš„å¼€å‘, åº”è¯¥ä»devåˆ†æ”¯checkoutå‡ºç‹¬ç«‹çš„featureåˆ†æ”¯, é¿å…å¹²æ‰°devåˆ†æ”¯ã€‚

- åœºæ™¯: æ¶‰åŠå¤šäººåä½œ: å›¢é˜Ÿå¤šä¸ªæˆå‘˜åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸‹è´Ÿè´£å¼€å‘ä¸åŒçš„åŠŸèƒ½, è¿™æ—¶å€™æ¯ä¸ªæˆå‘˜åœ¨è‡ªå·±çš„featureåˆ†æ”¯ç‹¬ç«‹å¼€å‘ã€‚å¤§åŠŸèƒ½å¼€å‘: å¤§åŠŸèƒ½å¼€å‘è·¨è¶Šå‘¨æœŸæ¯”è¾ƒé•¿, éœ€è¦å¤šæ¬¡è¿­ä»£æ‰ä¼šç¨³å®š. è¿™æ—¶å€™åº”è¯¥åœ¨ç‹¬ç«‹çš„åˆ†æ”¯ä¸Šå¼€å‘. æ–¹ä¾¿è·Ÿè¸ªå†å²è®°å½•, ä¹Ÿå…äºå¹²æ‰°devåˆ†æ”¯çš„è¿­ä»£å’Œå‘å¸ƒã€‚
- å‘½åè§„èŒƒ: `feature/name`: nameæ˜¯åŠŸèƒ½åç§°ã€‚`feature/version`: è¿™ä¹Ÿæ˜¯å›¢é˜Ÿå¸¸è§çš„æ¨¡å¼, å½“æ— æ³•ä½¿ç”¨ä¸€ä¸ªåŠŸèƒ½åç§°æ¥æè¿°æ—¶, å¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ä½œä¸ºâ€œåŠŸèƒ½â€ã€‚
- åˆå¹¶æ—¶æœº: å½“featureåˆ†æ”¯è¿­ä»£ç¨³å®š, å¹¶é€šè¿‡æµ‹è¯•å, åˆå¹¶åˆ°devåˆ†æ”¯. åˆå¹¶åˆ°devå, featureåˆ†æ”¯çš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚åç»­bugä¿®å¤å’ŒåŠŸèƒ½ä¼˜åŒ–ç›´æ¥åœ¨devå¼€å‘ã€‚å½“å¤šä¸ªfeatureåˆ†æ”¯éœ€è¦åˆå¹¶å¯¹å¤–å‘å¸ƒä¸´æ—¶ç‰ˆæœ¬æ—¶. åˆå¹¶åˆ°previewåˆ†æ”¯ . âš ï¸è¿™ç§æƒ…å†µä¸åº”è¯¥åˆå¹¶åˆ°devåˆ†æ”¯, å› ä¸ºfeatureåˆ†æ”¯å¯èƒ½è¿˜ä¸ç¨³å®šæˆ–æœªå®Œæˆã€‚ æ¯”å¦‚ä¸ºäº†è”è°ƒæŸäº›åŠŸèƒ½ã€‚
- åˆå¹¶æ–¹å¼: ä¸è¦ä½¿ç”¨ `fast-forward`. è¿™æ ·å¯ä»¥åœ¨åˆ†æ”¯å›¾ä¸ŠæŸ¥çœ‹åˆ°åˆ†æ”¯å†å²ã€‚

**previewåˆ†æ”¯**
ä¸´æ—¶çš„é¢„è§ˆåˆ†æ”¯, previewåˆ†æ”¯ç”¨äºä¸´æ—¶åˆå¹¶featureåˆ†æ”¯, è¿™å…¶ä¸­å¯èƒ½ä¼šä¿®å¤æŸäº›bugæˆ–è€…å†²çª. å¯ä»¥é€‰æ‹©æ€§åœ°å°†è¿™äº›æäº¤cherrypickå›featureåˆ†æ”¯. å½“é¢„è§ˆç»“æŸåå°±å¯ä»¥é”€æ¯previewåˆ†æ”¯ã€‚

**releaseåˆ†æ”¯**
releaseåˆ†æ”¯æœ‰ä¸¤ç§ä½¿ç”¨ç­–ç•¥ï¼Œç¬¬ä¸€ç§éµå¾ªgitFlowæµç¨‹, ç¬¬äºŒç§æ˜¯ç›®å‰åç«¯å›¢é˜Ÿä½¿ç”¨çš„ç­–ç•¥ï¼Œä¸ºäº†é…åˆåç«¯å·¥ä½œã€‚

**git flow é£æ ¼çš„releaseåˆ†æ”¯**
å½“å‰å‰ç«¯åº”ç”¨çš„ç¨³å®šç‰ˆæœ¬ç»‘å®š. releaseåˆ†æ”¯ä¸ä¸€å®šå­˜åœ¨, ä¸€èˆ¬æƒ…å†µä¸‹, åªä¼šåœ¨å‰ç«¯ç‰ˆæœ¬ç¨³å®šå, å°†å…¶åˆå¹¶åˆ°master, å¹¶åˆ›å»ºtagæ ‡è®°. è€Œåªæœ‰éœ€è¦ä¸ºæŒ‡å®šçš„æ­£å¼ç‰ˆæœ¬ä¿®å¤bugæ—¶æ‰ä¼šåˆ›å»ºreleaseåˆ†æ”¯ã€‚

- åœºæ™¯: éœ€è¦ä¸ºæŸä¸ªæ­£å¼ç‰ˆæœ¬ä¿®å¤bug(hotFix)æ—¶, ä»masterçš„å¯¹åº”tagä¸­checkout releaseåˆ†æ”¯ã€‚
- å‘½åè§„èŒƒ: release/version å¤–éƒ¨äººå‘˜åªä¼šå…³æ³¨ç‰ˆæœ¬ã€‚
- å¦‚ä½•ä¿®å¤: å¦‚æœå¯¹åº”bugå¯ä»¥åœ¨devåˆ†æ”¯ç›´æ¥è¢«ä¿®å¤, å¯ä»¥å…ˆæäº¤åˆ°devåˆ†æ”¯(æˆ–è€…å·²ç»ä¿®å¤äº†), ç„¶åå†cherrypickåˆ°releaseåˆ†æ”¯ã€‚å¦‚æœbugåœ¨æ–°ç‰ˆæœ¬æ— æ³•å¤ç°. æ¯”å¦‚æ–°ç‰ˆæœ¬å‡çº§äº†ä¾èµ–. é‚£ä¹ˆåœ¨releaseåˆ†æ”¯ç›´æ¥ä¿®å¤å³å¯ã€‚

**è‡ªå®šä¹‰é£æ ¼releaseåˆ†æ”¯**
å½“è¦å‘å¸ƒä¸€ä¸ªå¯¹åº”çš„ç‰ˆæœ¬æ—¶ï¼ˆæˆ–è€…ä¸€å¼€å§‹å¼€å‘æ—¶ï¼‰ä»devåˆ†æ”¯checkoutå‡ºä¸€ä¸ªå¼€å‘åˆ†æ”¯ï¼Œåç»­éœ€è¦å¯¹å¤–å‘å¸ƒæ—¶ï¼Œå°†devåˆ†æ”¯åˆå¹¶åˆ°releaseåˆ†æ”¯, å¹¶æ‰“ä¸Šç‰ˆæœ¬tagã€‚

- ä½•æ—¶åˆ›å»º: å¼€å¯æ–°ç‰ˆæœ¬å¼€å‘ä»»åŠ¡æ—¶(æ¨è)ï¼Œå‘å¤–å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬æ—¶ã€‚
- ä½•æ—¶åˆå¹¶: åé¢devæœ‰ç‰ˆæœ¬å‘å¸ƒéƒ½è¦åˆå¹¶åˆ°releaseåˆ†æ”¯ï¼Œç›´åˆ°å¼€å¯å¦ä¸€æ¡releaseåˆ†æ”¯ã€‚
- å¥½å¤„: å¯¹å‘å¸ƒå†…å®¹è¿›è¡Œç­›é€‰ã€‚ä¸“é—¨ç”¨äºå‘å¸ƒ, å¼€å‘è€…å®¹æ˜“è¿‡æ»¤å˜æ›´çš„å†…å®¹ã€‚

### æäº¤ä¿¡æ¯è§„èŒƒ

ä¸€ä¸ªå¥½çš„æäº¤ä¿¡æ¯, ä¼šå¸®åŠ©ä½ æé«˜é¡¹ç›®çš„æ•´ä½“è´¨é‡ã€‚

- why: æ ¼å¼ç»Ÿä¸€çš„æäº¤ä¿¡æ¯å¯ä»¥å¸®åŠ©è‡ªåŠ¨åŒ–ç”Ÿæˆchangelogã€‚ç‰ˆæœ¬åº“ä¸åªæ˜¯å­˜æ”¾ä»£ç çš„ä»“åº“, ä¹Ÿè®°å½•é¡¹ç›®çš„å¼€å‘è®°å½•. è¿™äº›è®°å½•åº”è¯¥å¯ä»¥å¸®åŠ©åæ¥è€…å¿«é€Ÿåœ°å­¦ä¹ å’Œå›é¡¾ä»£ç . ä¹Ÿåº”è¯¥æ–¹ä¾¿å…¶ä»–åä½œè€…reviewä½ çš„ä»£ç ã€‚
- åŸåˆ™: åŠå¹´å, ä½ èƒ½çœ‹æ‡‚ä½ çš„commitåšäº†ä»€ä¹ˆä¸œè¥¿ã€‚
- æ–¹å¼: ä½¿ç”¨git commit(æ‰“å¼€ç¼–è¾‘å™¨)è€Œä¸æ˜¯git commit -mã€‚
- å¿…è¦ä¿¡æ¯: 1ã€æäº¤æ”¹å˜äº†ä»€ä¹ˆ, è®©å…¶ä»–revieweræ›´å®¹æ˜“å®¡æ ¸ä»£ç å’Œå¿½ç•¥æ— å…³çš„æ”¹å˜ã€‚2ã€ç®€çŸ­è¯´æ˜ä½¿ç”¨ä»€ä¹ˆæ–¹å¼, ç­–ç•¥, ä¿®å¤äº†é—®é¢˜ã€‚3ã€è¯´æ˜å˜åŠ¨åŠŸèƒ½çš„ç»†èŠ‚ã€‚ ä¸€ä¸ªæäº¤ä¸åº”è¯¥åšè¶…è¿‡2ä¸ªåŠŸèƒ½çš„å˜åŠ¨ã€‚

ä½¿ç”¨ [commitlint](https://github.com/conventional-changelog/commitlint) å·¥å…·ï¼Œå¸¸ç”¨æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š

- âœ¨featureæˆ–feat: å¼•å…¥æ–°åŠŸèƒ½
- ğŸ›fix: ä¿®å¤äº†bug
- ğŸ“docs: æ–‡æ¡£
- ğŸ¨style: ä¼˜åŒ–é¡¹ç›®ç»“æ„æˆ–è€…ä»£ç æ ¼å¼
- â™»ï¸refactor: ä»£ç é‡æ„. ä»£ç é‡æ„ä¸æ¶‰åŠæ–°åŠŸèƒ½å’Œbugä¿®å¤. ä¸åº”è¯¥å½±å“åŸæœ‰åŠŸèƒ½, åŒ…æ‹¬å¯¹å¤–æš´éœ²çš„æ¥å£
- âœ…test: å¢åŠ æµ‹è¯•
- â«chore: æ„å»ºè¿‡ç¨‹, è¾…åŠ©å·¥å…·å‡çº§. å¦‚å‡çº§ä¾èµ–, å‡çº§æ„å»ºå·¥å…·
- âš¡ï¸perf: æ€§èƒ½ä¼˜åŒ–
- âª revert: revertä¹‹å‰çš„commit
	- git revert å‘½ä»¤ç”¨äºæ’¤é”€ä¹‹å‰çš„ä¸€ä¸ªæäº¤, å¹¶åœ¨ä¸ºè¿™ä¸ªæ’¤é”€æ“ä½œç”Ÿæˆä¸€ä¸ªæäº¤
- ğŸ‰ buildæˆ–release: æ„å»ºæˆ–å‘å¸ƒç‰ˆæœ¬
- ğŸ”’ safe: ä¿®å¤å®‰å…¨é—®é¢˜

```
git commit -m 'feat: add list'
```

## é¡¹ç›®ç»„ç»‡è§„èŒƒ

ä¸€ä¸ªå…¸å‹çš„é¡¹ç›®ç»„ç»‡è§„èŒƒå¦‚ä¸‹:

- **README.md**: é¡¹ç›®è¯´æ˜, è¿™ä¸ªæ˜¯æœ€é‡è¦ã€‚ä½ å¿…é¡»åœ¨è¿™é‡Œæä¾›å…³äºé¡¹ç›®çš„å…³é”®ä¿¡æ¯æˆ–è€…ç›¸å…³ä¿¡æ¯çš„å…¥å£. ä¸€èˆ¬åŒ…å«ä¸‹åˆ—ä¿¡æ¯:
	- ç®€è¦æè¿°ã€é¡¹ç›®ä¸»è¦ç‰¹æ€§
	- è¿è¡Œç¯å¢ƒ/ä¾èµ–ã€å®‰è£…å’Œæ„å»ºã€æµ‹è¯•æŒ‡å—
	- ç®€å•ç¤ºä¾‹ä»£ç 
	- æ–‡æ¡£æˆ–æ–‡æ¡£å…¥å£, å…¶ä»–ç‰ˆæœ¬æˆ–ç›¸å…³èµ„æºå…¥å£
	- è”ç³»æ–¹å¼ã€è®¨è®ºç¾¤
	- è®¸å¯ã€è´¡çŒ®/å¼€å‘æŒ‡å—
- **CHANGELOG.md**: æ”¾ç½®æ¯ä¸ªç‰ˆæœ¬çš„å˜åŠ¨å†…å®¹, é€šå¸¸è¦æè¿°æ¯ä¸ªç‰ˆæœ¬å˜æ›´çš„å†…å®¹ã€‚æ–¹ä¾¿ä½¿ç”¨è€…ç¡®å®šåº”è¯¥ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬. å…³äºCHANGELOGçš„è§„èŒƒå¯ä»¥å‚è€ƒ [keep a changelog](https://keepachangelog.com/en/1.0.0/)
- **package.json**: å‰ç«¯é¡¹ç›®å¿…é¡». æè¿°å½“å‰çš„ç‰ˆæœ¬ã€å¯ç”¨çš„å‘½ä»¤ã€åŒ…åã€ä¾èµ–ã€ç¯å¢ƒçº¦æŸã€é¡¹ç›®é…ç½®ç­‰ä¿¡æ¯.
- **.gitignore**: å¿½ç•¥ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œé¿å…å°†è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“
- **.gitattributes**: gité…ç½®ï¼Œæœ‰ä¸€äº›è·¨å¹³å°å·®å¼‚çš„è¡Œä¸ºå¯èƒ½éœ€è¦åœ¨è¿™é‡Œé…ç½®ä¸€ä¸‹ï¼Œå¦‚æ¢è¡Œè§„åˆ™
- **docs/**: é¡¹ç›®çš„ç»†åŒ–æ–‡æ¡£, å¯é€‰.
- **examples/**: é¡¹ç›®çš„ç¤ºä¾‹ä»£ç ï¼Œå¯é€‰.
- **build**: é¡¹ç›®å·¥å…·ç±»è„šæœ¬æ”¾ç½®åœ¨è¿™é‡Œï¼Œéå¿…é¡»ã€‚å¦‚æœä½¿ç”¨ç»Ÿä¸€æ„å»ºå·¥å…·ï¼Œåˆ™æ²¡æœ‰è¿™ä¸ªç›®å½•
- **dist/**: é¡¹ç›®æ„å»ºç»“æœè¾“å‡ºç›®å½•
- **src/**: æºä»£ç ç›®å½•
- **tests**: å…¨å±€çš„æµ‹è¯•ç›®å½•ï¼Œé€šå¸¸æ”¾åº”ç”¨çš„é›†æˆæµ‹è¯•æˆ–E2Eæµ‹è¯•ç­‰ç”¨ä¾‹
- **.env***: é¡¹ç›®ä¸­æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å½±å“åº”ç”¨åœ¨ä¸åŒè¿è¡Œç¯å¢ƒä¸‹çš„è¡Œä¸º. å¯ä»¥é€šè¿‡[dotEnv](https://github.com/motdotla/dotenv)æ¥ä»æ–‡ä»¶ä¸­è¯»å–ç¯å¢ƒå˜é‡. é€šå¸¸æœ‰ä¸‰ä¸ªæ–‡ä»¶:
	- `.env` é€šç”¨çš„ç¯å¢ƒå˜é‡
	- `.env.development` å¼€å‘ç¯å¢ƒçš„ç¯å¢ƒå˜é‡
	- `.env.production` ç”Ÿæˆç¯å¢ƒçš„ç¯å¢ƒå˜é‡
	
	åŸºæœ¬ä¸Šè¿™äº›æ–‡ä»¶çš„å˜åŠ¨çš„é¢‘ç‡å¾ˆå°‘ï¼Œå›¢é˜Ÿæˆå‘˜åº”è¯¥ä¸è¦éšæ„å˜åŠ¨ï¼Œä»¥å…å½±å“å…¶ä»–æˆå‘˜ã€‚æ‰€ä»¥é€šå¸¸ä¼šä½¿ç”¨.env.*.localæ–‡ä»¶æ¥è¦†ç›–ä¸Šè¿°çš„é…ç½®, å¦å¤–ä¼šè®¾ç½®ç‰ˆæœ¬åº“æ¥å¿½ç•¥*.localæ–‡ä»¶.

å¯¹äºå¼€æºé¡¹ç›®é€šå¸¸è¿˜åŒ…æ‹¬è¿™äº›ç›®å½•:
- **LICENSE**: è¯´æ˜é¡¹ç›®è®¸å¯
- **.github**: å¼€æºè´¡çŒ®è§„èŒƒå’ŒæŒ‡å—


## ç¼–ç è§„èŒƒ

ç»Ÿä¸€ç¼–ç è§„èŒƒä¸ä»…å¯ä»¥å¤§å¹…æé«˜ä»£ç å¯è¯»æ€§ï¼Œç”šè‡³ä¼šæé«˜ä»£ç è´¨é‡ã€‚å½“æˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—å…³äºç¼–ç è§„èŒƒçš„è§„åˆ™é›†æ—¶ï¼Œéœ€è¦å·¥å…·å»è¾…åŠ©æ£€æµ‹ï¼Œè¿™å°±æ˜¯ `ESLint`ã€‚

è§„åˆ™é›†éœ€è¦ç»Ÿä¸€é›†ä¸­é…ç½®ï¼Œ`ESLint` ä¼šé»˜è®¤è¯»å–é…ç½®æ–‡ä»¶ `.eslintrc` æ¥è§£æï¼Œè€Œè§„åˆ™é›†åœ¨ `rules` ä¸­è¿›è¡Œé…ç½®ï¼š

```json
"rules": {
	"semi": ["error", "always"],
	"quotes": ["error", "double"]
}
```

è€Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯è®¾å®šæˆ‘ä»¬çš„ä»£ç è§„èŒƒï¼Œå³ `rules` é¡¹ï¼Œå…³äºå®ƒçš„æ–‡æ¡£åŠæœ€ä½³å®è·µå‚è€ƒä¸šç•Œæ ‡æ†[Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript) 

### ç¬¬ä¸€å±‚çº¦æŸï¼šé¡¹ç›®å¼•å…¥ESLint

å½“ä¸ç¬¦åˆä»£ç è§„èŒƒçš„ç¬¬ä¸€æ—¶é—´ï¼Œæˆ‘ä»¬å°±è¦æ„ŸçŸ¥åˆ°å®ƒï¼ŒåŠæ—¶åé¦ˆï¼Œå¿«é€Ÿçº æ­£ï¼Œæ¯”ç›´åˆ°æœ€åç§¯æ”’äº†ä¸€å¤§å †é”™è¯¯è¦é«˜æ•ˆå¾ˆå¤šã€‚

1.å®‰è£…ä¾èµ–

```
npm install eslint eslint-config-airbnb-base eslint-plugin-import eslint-plugin-vue --save-dev
```

æˆ–åœ¨ `package.json` ä¸­é…ç½®ä»¥ä¸‹ä¾èµ–ï¼Œæ‰§è¡Œ `npm install` å®‰è£…

```js
	"eslint": "^7.3.1",
	"eslint-config-airbnb-base": "^14.2.0",
	// "eslint-config-prettier": "^6.11.0",
	// "eslint-friendly-formatter": "^4.0.1",
	// "eslint-loader": "^4.0.2",
	"eslint-plugin-import": "^2.22.0",
	// "eslint-plugin-prettier": "^3.1.4",
	"eslint-plugin-vue": "^6.2.2",
```

2.æ·»åŠ eslinté…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹è·¯å¾„æ·»åŠ ä¸¤ä¸ªæ–‡ä»¶ `.eslintrc.js` å’Œ `.eslintignore`

`.eslintrc.js` eslintè§„åˆ™é…ç½®æ–‡ä»¶
```js
module.exports = {
  // è§„åˆ™è¿è¡Œçš„ç¯å¢ƒ
  "env": {
    "browser": true,
    "es2020": true,
    "node": true
  },
  // ä½¿ç”¨çš„è§„åˆ™é›†ï¼Œæ ¹æ®ä¸åŒé¡¹ç›®(react/vueç­‰)ä½¿ç”¨ä¸åŒçš„è§„åˆ™
  "extends": [
    // "eslint:recommended",
    "plugin:vue/essential",
    "airbnb-base",
    // "plugin:prettier/recommended"
  ],
  // æŒ‡å®šç¼–è¯‘å™¨
  "parserOptions": {
    "ecmaVersion": 11,
    "sourceType": "module"
  },
  "plugins": [
    "vue",
    // "prettier"
  ],
  /** 
   * è‡ªå®šä¹‰è§„åˆ™
   * â€œoffâ€ æˆ– 0 - å…³é—­è§„åˆ™
   * â€œwarnâ€ æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)
   * â€œerrorâ€ æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)
   */
  "rules": {
    // å¤šä¸ªç‰¹æ€§çš„å…ƒç´ åº”è¯¥åˆ†å¤šè¡Œæ’°å†™ï¼Œæ¯ä¸ªç‰¹æ€§ä¸€è¡Œ
    "vue/max-attributes-per-line": [
      2,
      {
        "singleline": 1,
        "multiline": {
          "max": 1,
          "allowFirstLine": false
        }
      }
    ],
    "vue/no-parsing-error": [
      2,
      {
        "x-invalid-end-tag": false
      }
    ],
    "import/order": 0,
    "no-unused-vars": 1,
    "no-console": 0,
    "max-len": [
      2,
      300,
      4,
      {
        "ignoreUrls": true
      }
    ],
    "import/prefer-default-export": 0,
    // æœ«å°¾åˆ†å·
    "semi": 0,
    // å°¾éšé€—å·
    "comma-dangle": 0,
    // æ¢è¡Œç¬¦(å¹³å°ä¸åŒï¼Œwindows CRLF, unix LF)
    "linebreak-style": 0,
    // require()å‡½æ•°ä»…åœ¨æ¨¡å—çš„é¡¶å±‚è°ƒç”¨å®ƒï¼Œç¦ç”¨
    "global-require": 0,
    "import/no-dynamic-require": 0
    // "prettier/prettier": [
    //   "error",
    //   {
    //     "singleQuote": true,
    //     "trailingComma": "none",
    //     "bracketSpacing": true,
    //     "jsxBracketSameLine": true
    //   }
    // ]
  },
  "settings": {
    "import/resolver": {
      "node": {
        "paths": ["src"],
        "extensions": [".js", ".jsx", ".vue"]
      }
    }
  }
};

```

æ›´å¤šçš„è§„åˆ™å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æŒ‰éœ€å¼•å…¥ï¼š[eslint ä¸­æ–‡æ–‡æ¡£](https://cn.eslint.org/docs/rules/)

`.eslintignore` å¯¹ç‰¹å®šç›®å½•ï¼ˆæ–‡ä»¶ï¼‰å¿½ç•¥eslintæ£€æµ‹çš„é…ç½®æ–‡ä»¶

```
.eslintrc.js
.vscode/settings.json
/build/
/config/
/dist/
```

3.IDE æ™ºèƒ½æç¤º

è¿™é‡Œä»¥ VS Code ä½œä¸ºç¤ºä¾‹ï¼Œå®ƒåªéœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼š`eslint`ï¼Œä¾¿å¯ä»¥åšåˆ°æ™ºèƒ½æç¤ºã€‚

4.webpack é…ç½®

`webpack.base.conf.js` å¯ä»¥é€šè¿‡é…ç½® `eslint-loader` è®©ä½ æœ‰ä¸ç¬¦åˆ `eslint` çš„æ—¶å€™åœ¨å‘½ä»¤è¡Œæˆ–è€…ç•Œé¢é‡Œæç¤ºä½ æœ‰ä»€ä¹ˆé”™è¯¯ã€‚

å®‰è£…ä¾èµ–

```
npm install eslint-friendly-formatter eslint-loader --save-dev
```

`package.json`

```js
	"eslint": "^7.3.1",
	"eslint-config-airbnb-base": "^14.2.0",
	// "eslint-config-prettier": "^6.11.0",
	"eslint-friendly-formatter": "^4.0.1",
	"eslint-loader": "^4.0.2",
	"eslint-plugin-import": "^2.22.0",
	// "eslint-plugin-prettier": "^3.1.4",
	"eslint-plugin-vue": "^6.2.2",
```

`build\webpack.base.conf.jsï¼š`

```js
const createLintingRule = () => ({
  test: /\.(js|vue)$/,
  loader: 'eslint-loader',
  enforce: 'pre',
  include: [resolve('src'), resolve('test')],
  options: {
    formatter: require('eslint-friendly-formatter'),
    emitWarning: !config.dev.showEslintErrorsInOverlay
  }
})

module.exports = {
  entry: {
  },
  output: {
  },
  resolve: {
  },
  externals: {
  },
  module: {
    rules: [
      ...(config.dev.useEslint ? [createLintingRule()] : [])
    ],
    loaders: [
    ]
  },
  plugins: [
  ]
}
```

`config\index.jsï¼š`

```js
module.exports = {
  dev: {

    // Use Eslint Loader?
    // If true, your code will be linted during bundling and
    // linting errors and warnings will be shown in the console.
    useEslint: true,
    // If true, eslint errors and warnings will also be shown in the error overlay
    // in the browser.
    showEslintErrorsInOverlay: false,

  },

  build: {
  }
}
```

TIPï¼š`showEslintErrorsInOverlay` è¿™ä¸ªå˜é‡å¯ä»¥æ§åˆ¶é”™è¯¯æç¤ºæ˜¯å¦éœ€è¦åœ¨æµè§ˆå™¨ç•Œé¢ä¸­æç¤ºã€‚

### ç¬¬äºŒå±‚çº¦æŸï¼šGit Hooks

ä¸ºäº†ä¿è¯æ¯æ¬¡æäº¤çš„ `git` ä»£ç æ˜¯æ­£ç¡®çš„ï¼Œä¸ºæ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `eslint` é…åˆ `git hook`ï¼Œ åœ¨è¿›è¡Œ `git commit` çš„æ—¶å€™éªŒè¯ `eslint` è§„èŒƒã€‚å¦‚æœ `eslint` éªŒè¯ä¸é€šè¿‡ï¼Œåˆ™ä¸èƒ½æäº¤ã€‚

æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ª `git` çš„ hook å·¥å…· â€”â€” `husky`

```
npm install husky --save-dev
```

å®‰è£…å¥½ä¹‹ååœ¨ `package.json`ï¼Œ`scripts` ä¸‹é¢åŠ å…¥ `esliint` çš„å‘½ä»¤éªŒè¯ `eslint` çš„è§„åˆ™

```json
"scripts": {
	"lint": "node_modules/.bin/eslint --ext .js,.vue src",
	"lint:fix": "node_modules/.bin/eslint --ext .js,.vue src --fix"
}
```

æ¥ä¸‹æ¥åœ¨ `package.json` ä¸‹é¢åŠ å…¥ `husky` çš„é…ç½®é¡¹

```json
"husky": {
	"hooks": {
		"pre-commit": "echo 'husky' && npm run lint"
	}
}
```

æ„æ€æ˜¯åœ¨è¿›è¡Œ `git commit` çš„æ—¶å€™ å…ˆå»æ‰§è¡Œ `pre-commit` é‡Œé¢çš„å‘½ä»¤ï¼š æˆ‘ä»¬åœ¨è¿™é‡Œè¾“å‡º `husky` å¹¶ä¸”æ‰§è¡Œ `npm run lint`  (æˆ‘ä»¬ä¹‹å‰åŠ ä¸Šçš„éªŒè¯eslintçš„å‘½ä»¤)ã€‚

å¦‚æœ `eslint` éªŒè¯é€šè¿‡äº†ï¼Œåˆ™ä¼šè¿›è¡Œ `commit` æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥ `eslint` çš„é”™è¯¯æç¤ºã€‚


**æœ€åï¼šä¸€å®šè¦ä½¿ç”¨ npm å®‰è£… eslint å’Œ husky**

## å‚è€ƒ

* [if æˆ‘æ˜¯å‰ç«¯å›¢é˜Ÿ Leaderï¼Œæ€ä¹ˆåˆ¶å®šå‰ç«¯åä½œè§„èŒƒ?](https://juejin.im/post/5d3a7134f265da1b5d57f1ed)
* [eslint é…åˆ git ï¼ˆhuskyï¼‰](https://www.cnblogs.com/zzd0916/p/10254893.html)
* [git-åˆ†æ”¯æ¨¡å‹](https://github.com/GDJiaMi/frontend-standards/blob/master/development.md#git-%E5%88%86%E6%94%AF%E6%A8%A1%E5%9E%8B)